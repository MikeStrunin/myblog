<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Лента Постов</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<button id="addPostBtn">Добавить Пост</button>
<div id="postsContainer">
    <!-- Превью постов -->
    <div th:each="post : ${posts}" class="postPreview">
        <a th:href="@{/post/{id}(id=${post.id})}" th:text="${post.caption}">Название поста</a>
        <img th:src="@{${post.fileName}}" alt="Картинка поста">
<!--            <p th:text="${post.text.substring(0, 100)}">Короткий текст</p>-->
        <p th:text="${post.text}">Короткий текст</p>
        <p>Комментариев: <span th:text="${post.comments == null? 0 : post.comments.size()}">0</span></p>
        <p>Лайков: <span th:text="${post.likesCount  == null? 0 : post.likesCount}">0</span></p>
        <p th:each="tag : ${post.tags}">Тег: <span th:text="${tag.name}">Тег</span></p>
    </div>
</div>


<div id="addPostForm" style="display:none;">
    <form method="POST" th:action="@{/post/addPost}" enctype="multipart/form-data">
        <input type="text" name="caption" placeholder="Название поста">
        <textarea name="text" placeholder="Текст"></textarea>
        <input type="file" name="file">
        <select name="tagIds" multiple>
            <option th:each="tag : ${tags}" th:value="${tag.id}" th:text="${tag.name}">Тег</option>
        </select>
        <button type="submit">Добавить</button>
    </form>
</div>

<!-- Фильтрация по тегу -->
<select id="filterByTag">
    <option value="">Все</option>
    <option th:each="tag : ${tags}" th:value="${tag.name}" th:text="${tag.name}">Тег</option>
</select>

<!-- Пагинация -->
<select id="postsPerPage">
    <option value="10">10 постов</option>
    <option value="20">20 постов</option>
    <option value="50">50 постов</option>
</select>

<script th:src="@{/js/index.js}"></script>
</body>
</html>
